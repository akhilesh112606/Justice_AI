<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ReviewerAI - Extracted Text</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Sora:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { width: 100%; min-height: 100%; font-family: 'Space Grotesk', 'Sora', system-ui, -apple-system, sans-serif; }
    body { 
      background: radial-gradient(circle at 20% 20%, #121212, #090909 35%, #050505 70%, #000); 
      color: #ffffff; 
      overflow-x: hidden; 
      position: relative; 
    }
    body::after { 
      content: ''; 
      position: fixed; 
      inset: 0; 
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160' viewBox='0 0 160 160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.06'/%3E%3C/svg%3E"); 
      pointer-events: none; 
      z-index: 1; 
    }

    .container { max-width: 1000px; margin: 0 auto; padding: 0 24px; }

    @keyframes fadeInUp { 
      from { opacity: 0; transform: translateY(40px); } 
      to { opacity: 1; transform: translateY(0); } 
    }

    /* Background */
    .background { position: fixed; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; z-index: 0; }
    .bg-orb { position: absolute; border-radius: 50%; filter: blur(80px); }
    .orb-1 { width: 420px; height: 420px; background: radial-gradient(circle, rgba(167, 139, 250, 0.18), rgba(167, 139, 250, 0.04)); top: -40px; left: 8%; animation: blob 8s ease-in-out infinite; }
    .orb-2 { width: 420px; height: 420px; background: radial-gradient(circle, rgba(139, 92, 246, 0.14), rgba(0, 0, 0, 0)); bottom: 5%; right: 4%; animation: blob-2 10s ease-in-out infinite; }
    .orb-3 { width: 360px; height: 360px; background: radial-gradient(circle, rgba(196, 181, 253, 0.22), rgba(0, 0, 0, 0)); top: 50%; left: 50%; transform: translate(-50%, -50%); animation: blob-3 12s ease-in-out infinite; }
    
    @keyframes blob { 0%, 100% { transform: translate(0, 0) scale(1); } 25% { transform: translate(20px, -30px) scale(1.1); } 50% { transform: translate(-20px, 20px) scale(0.95); } 75% { transform: translate(30px, 10px) scale(1.05); } }
    @keyframes blob-2 { 0%, 100% { transform: translate(0, 0) scale(1); } 25% { transform: translate(-30px, 20px) scale(0.95); } 50% { transform: translate(25px, -15px) scale(1.1); } 75% { transform: translate(-15px, -25px) scale(0.98); } }
    @keyframes blob-3 { 0%, 100% { transform: translate(-50%, -50%) scale(1); } 25% { transform: translate(calc(-50% + 15px), calc(-50% - 20px)) scale(1.08); } 50% { transform: translate(calc(-50% - 20px), calc(-50% + 15px)) scale(0.92); } 75% { transform: translate(calc(-50% + 25px), calc(-50% + 20px)) scale(1.05); } }

    .grid-overlay { 
      position: absolute; 
      inset: 0; 
      background-image: linear-gradient(to right, rgba(255, 255, 255, 0.04) 1px, transparent 1px), linear-gradient(to bottom, rgba(255, 255, 255, 0.04) 1px, transparent 1px); 
      background-size: 4rem 4rem; 
      mask-image: radial-gradient(ellipse 60% 50% at 50% 50%, #000 70%, transparent 100%); 
    }
    .vignette { position: absolute; inset: -8%; pointer-events: none; background: radial-gradient(circle at center, transparent 52%, rgba(0, 0, 0, 0.35) 75%, rgba(0, 0, 0, 0.55) 100%); mix-blend-mode: multiply; opacity: 0.6; }

    /* Corner badge */
    .corner-badge { position: fixed; bottom: 16px; right: 16px; z-index: 9999; display: flex; align-items: center; gap: 8px; padding: 12px 18px; background: linear-gradient(135deg, rgba(12,14,18,0.96), rgba(6,8,12,0.98)); border: 1px solid rgba(255,255,255,0.12); border-radius: 12px; box-shadow: 0 10px 32px rgba(0,0,0,0.6); backdrop-filter: blur(12px); pointer-events: none; }
    .corner-badge-dot { width: 8px; height: 8px; border-radius: 50%; background: linear-gradient(135deg, #a78bfa, #8b5cf6); box-shadow: 0 0 10px rgba(167,139,250,0.8); animation: badgePulse 2s ease-in-out infinite; }
    .corner-badge-text { font-size: 12px; font-weight: 700; letter-spacing: 1.5px; color: rgba(255,255,255,0.85); text-transform: uppercase; }
    @keyframes badgePulse { 0%, 100% { opacity: 0.6; transform: scale(0.9); } 50% { opacity: 1; transform: scale(1.1); } }

    /* Content */
    .content { position: relative; z-index: 10; padding: 60px 0 80px; }

    /* Header */
    .header { text-align: center; margin-bottom: 48px; animation: fadeInUp 0.8s ease-out forwards; }
    .header-title { font-size: clamp(32px, 5vw, 48px); font-weight: 700; margin-bottom: 12px; background: linear-gradient(120deg, #ffffff, #a78bfa); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
    .header-subtitle { font-size: 16px; color: #c4b5fd; letter-spacing: 2px; text-transform: uppercase; }

    /* File info card */
    .file-info { display: flex; flex-wrap: wrap; gap: 16px; justify-content: center; margin-bottom: 32px; animation: fadeInUp 0.8s ease-out 0.1s forwards; opacity: 0; }
    .info-chip { display: flex; align-items: center; gap: 8px; padding: 12px 20px; background: rgba(167, 139, 250, 0.08); border: 1px solid rgba(167, 139, 250, 0.25); border-radius: 12px; backdrop-filter: blur(10px); }
    .info-chip svg { width: 18px; height: 18px; color: #a78bfa; }
    .info-chip-label { font-size: 12px; color: #9ca3af; text-transform: uppercase; letter-spacing: 0.5px; }
    .info-chip-value { font-size: 14px; font-weight: 600; color: #ffffff; }

    /* Text card */
    .text-card { background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.08); border-radius: 20px; backdrop-filter: blur(16px); box-shadow: 0 24px 60px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.06) inset; animation: fadeInUp 0.8s ease-out 0.2s forwards; opacity: 0; overflow: hidden; }
    .text-card-header { display: flex; align-items: center; justify-content: space-between; padding: 20px 24px; border-bottom: 1px solid rgba(255, 255, 255, 0.08); background: rgba(255, 255, 255, 0.02); }
    .text-card-title { display: flex; align-items: center; gap: 12px; font-size: 18px; font-weight: 600; }
    .text-card-title svg { width: 24px; height: 24px; color: #a78bfa; }
    .text-card-actions { display: flex; gap: 8px; }
    
    .text-content { padding: 24px; max-height: 60vh; overflow-y: auto; }
    .text-content pre { white-space: pre-wrap; word-wrap: break-word; font-family: 'Space Grotesk', monospace; font-size: 15px; line-height: 1.8; color: #e5e7eb; }

    /* Buttons */
    .btn { cursor: pointer; border: none; padding: 12px 24px; border-radius: 12px; font-weight: 600; font-size: 14px; transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 8px; text-decoration: none; }
    .btn-primary { background: linear-gradient(135deg, #a78bfa, #8b5cf6); color: #ffffff; box-shadow: 0 8px 24px rgba(139, 92, 246, 0.3); }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 12px 32px rgba(139, 92, 246, 0.4); }
    .btn-secondary { background: rgba(255, 255, 255, 0.06); border: 1px solid rgba(255, 255, 255, 0.15); color: #ffffff; }
    .btn-secondary:hover { background: rgba(255, 255, 255, 0.1); border-color: rgba(255, 255, 255, 0.25); }
    .btn-icon { padding: 10px; border-radius: 10px; }

    /* Actions */
    .actions { display: flex; gap: 16px; justify-content: center; margin-top: 32px; animation: fadeInUp 0.8s ease-out 0.3s forwards; opacity: 0; }

    /* Scrollbar */
    .text-content::-webkit-scrollbar { width: 8px; }
    .text-content::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.05); border-radius: 4px; }
    .text-content::-webkit-scrollbar-thumb { background: rgba(167, 139, 250, 0.3); border-radius: 4px; }
    .text-content::-webkit-scrollbar-thumb:hover { background: rgba(167, 139, 250, 0.5); }

    /* SVG Icons */
    svg { fill: none; stroke: currentColor; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; }

    /* Responsive */
    @media (max-width: 640px) {
      .text-card-header { flex-direction: column; gap: 16px; align-items: flex-start; }
      .actions { flex-direction: column; }
      .actions .btn { width: 100%; justify-content: center; }
    }
  </style>
</head>
<body>
  <div class="background">
    <div class="bg-orb orb-1"></div>
    <div class="bg-orb orb-2"></div>
    <div class="bg-orb orb-3"></div>
    <div class="grid-overlay"></div>
    <div class="vignette"></div>
  </div>

  <div class="corner-badge">
    <div class="corner-badge-dot"></div>
    <span class="corner-badge-text">ReviewerAI</span>
  </div>

  <div class="content">
    <div class="container">
      <div class="header">
        <h1 class="header-title">Extracted Text</h1>
        <p class="header-subtitle">Research Paper Content</p>
      </div>

      <div class="file-info">
        <div class="info-chip">
          <svg viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline></svg>
          <div>
            <div class="info-chip-label">File</div>
            <div class="info-chip-value">{{ filename }}</div>
          </div>
        </div>
        <div class="info-chip">
          <svg viewBox="0 0 24 24"><path d="M4 7V4h16v3"></path><path d="M9 20h6"></path><path d="M12 4v16"></path></svg>
          <div>
            <div class="info-chip-label">Words</div>
            <div class="info-chip-value">{{ word_count | default(0) }}</div>
          </div>
        </div>
        <div class="info-chip">
          <svg viewBox="0 0 24 24"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg>
          <div>
            <div class="info-chip-label">Characters</div>
            <div class="info-chip-value">{{ char_count | default(0) }}</div>
          </div>
        </div>
      </div>

      <div class="text-card">
        <div class="text-card-header">
          <div class="text-card-title">
            <svg viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
            Document Content
          </div>
          <div class="text-card-actions">
            <button class="btn btn-secondary btn-icon" onclick="copyText()" title="Copy to clipboard">
              <svg viewBox="0 0 24 24" style="width: 18px; height: 18px;"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
          </div>
        </div>
        <div class="text-content">
          <pre id="extracted-text">{{ extracted_text }}</pre>
        </div>
      </div>

      <div class="actions">
        <a href="/" class="btn btn-secondary">
          <svg viewBox="0 0 24 24" style="width: 18px; height: 18px;"><path d="M19 12H5"></path><polyline points="12 19 5 12 12 5"></polyline></svg>
          Upload Another
        </a>
        <button class="btn btn-primary" onclick="downloadText()">
          <svg viewBox="0 0 24 24" style="width: 18px; height: 18px;"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
          Download Text
        </button>
      </div>
    </div>
  </div>

  <script>
    function copyText() {
      const text = document.getElementById('extracted-text').innerText;
      navigator.clipboard.writeText(text).then(() => {
        alert('Text copied to clipboard!');
      }).catch(err => {
        console.error('Failed to copy:', err);
      });
    }

    function downloadText() {
      const text = document.getElementById('extracted-text').innerText;
      const filename = '{{ filename }}'.replace(/\.[^/.]+$/, '') + '_extracted.txt';
      const blob = new Blob([text], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }
  </script>
</body>
</html>
